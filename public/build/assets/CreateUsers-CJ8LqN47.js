import{s as G}from"./index-xVtuQsS3.js";import{s as H}from"./index-C4DqyGF-.js";import{s as J}from"./index-8GbJIJWL.js";import{s as K}from"./index-kJG44KYi.js";import{s as X}from"./index-BUMsHM9b.js";import{i as Y,r as l,f as B,n as Z,q as ee,o as se,c as $,e as t,d as s,w as P,l as ae,u as a,k as le,s as oe,v as c,A as p,t as f,F as te,b as v}from"./app-Dg6_If3w.js";import{c as re,a as g,u as ie}from"./index.esm-B3CXHi-X.js";import"./moment-C5S46NFB.js";import{d as ne}from"./debounce-BMmXVQ06.js";import"./index-An9NzH2t.js";import"./index-BDMYIOAl.js";import"./index-BfGzJPO8.js";import"./index-JaNCC1uL.js";import"./index-B5-4kyNr.js";import"./index-Crg88osL.js";import"./index-Wxp8pAOr.js";import"./index-BQxnr25f.js";import"./index-DNq5N3QD.js";const de={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},me={class:"w-full"},ue={class:"flex flex-col gap-4 text-center"},ce={key:1,class:"flex flex-col md:flex-row gap-12"},pe={class:"w-full"},fe={class:"card flex flex-col gap-4"},ve={class:"w-full"},ge={class:"flex flex-col gap-2"},xe={id:"name-help",class:"p-error"},be={class:"flex flex-col gap-2"},ye={id:"email-help",class:"p-error"},_e={class:"flex flex-col gap-2"},we={id:"password-help",class:"p-error"},he={class:"flex flex-col gap-2"},ke={id:"role_id-help",class:"p-error"},We={__name:"CreateUsers",setup(Ve){const x=Z(),n=Y();l(null);const b=l(!0),y=l(!1);let N=l(null);const U=l(""),_=l(null),L=l(1);l(15),l(0);const w=l(!1),q=l(null),d=l(!1),A=re({role_id:g().required().trim().label("Categoria"),name:g().required().trim().label("Name"),email:g().required().trim().label("Email"),password:g().required().trim().label("Password")}),{defineField:m,handleSubmit:I,resetForm:Ce,errors:r,setErrors:M}=ie({validationSchema:A}),[h]=m("role_id"),[k]=m("name"),[V]=m("email"),[C]=m("password"),E=l();function F(){x&&x.back()}const T=()=>{w.value=!1},S=I(i=>{E.value!=null&&(i.image=E.value),d.value=!0,B.post("/api/users",i,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{x.back(),n.add({severity:"success",summary:"Successo",detail:"SubCategoria criado com sucesso",life:3e3})}).catch(e=>{d.value=!1,n.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&M(e.response.data.errors)}).finally(()=>{d.value=!1})}),j=async(i=1)=>{B.get("/api/users/create",{params:{query:U.value}}).then(e=>{_.value=e.data.roles,q.value=e.data.roles,b.value=!1}).catch(e=>{b.value=!1,n.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),F()})},R=()=>{y.value=!0,B.delete(`/api/users/${N.value}`).then(()=>{_.value.data=_.value.data.filter(i=>i.id!==N.value),T(),n.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(i=>{n.add({severity:"error",summary:"Erro",detail:`${i}`,life:3e3}),y.value=!1}).finally(()=>{y.value=!1})},W=ne(()=>{j(L.value)},300);return ee(U,W),se(()=>{j()}),(i,e)=>{const z=X,u=K,D=J,O=H,Q=G;return v(),$(te,null,[b.value?(v(),$("div",de,[s("div",me,[s("div",ue,[t(z,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[6]||(e[6]=s("p",null,"Por Favor Aguarde...",-1))])])])):(v(),$("div",ce,[s("div",pe,[s("div",fe,[s("div",ve,[t(u,{label:"Voltar",class:"mr-2 mb-2",onClick:F},{default:P(()=>e[7]||(e[7]=[s("i",{class:"pi pi-angle-left"},null,-1),ae(" Voltar")])),_:1})]),e[12]||(e[12]=s("div",{class:"font-semibold text-xl"},"Usuários",-1)),e[13]||(e[13]=s("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),s("form",{onSubmit:e[4]||(e[4]=(...o)=>a(S)&&a(S)(...o))},[s("div",ge,[e[8]||(e[8]=s("label",{for:"name1"},"Nome",-1)),t(D,{modelValue:a(k),"onUpdate:modelValue":e[0]||(e[0]=o=>p(k)?k.value=o:null),id:"name",placeholder:"Nome",class:c({"p-invalid":a(r).name}),type:"text"},null,8,["modelValue","class"]),s("small",xe,f(a(r).name),1)]),s("div",be,[e[9]||(e[9]=s("label",{for:"email"},"Email",-1)),t(D,{modelValue:a(V),"onUpdate:modelValue":e[1]||(e[1]=o=>p(V)?V.value=o:null),id:"email",placeholder:"Email",class:c({"p-invalid":a(r).email}),type:"email"},null,8,["modelValue","class"]),s("small",ye,f(a(r).email),1)]),s("div",_e,[e[10]||(e[10]=s("label",{for:"password"},"Password",-1)),t(D,{modelValue:a(C),"onUpdate:modelValue":e[2]||(e[2]=o=>p(C)?C.value=o:null),id:"password",placeholder:"Password",class:c({"p-invalid":a(r).password}),type:"password"},null,8,["modelValue","class"]),s("small",we,f(a(r).name),1)]),s("div",he,[e[11]||(e[11]=s("label",{for:"name1"},"Previlégio",-1)),t(O,{modelValue:a(h),"onUpdate:modelValue":e[3]||(e[3]=o=>p(h)?h.value=o:null),options:q.value,optionLabel:"name",optionValue:"id",placeholder:"Selecionar",class:c({"p-invalid":a(r).role_id})},null,8,["modelValue","options","class"]),s("small",ke,f(a(r).role_id),1)]),t(u,{label:"Submeter",class:"mr-2 mb-2",onClick:a(S),disabled:d.value},null,8,["onClick","disabled"]),d.value?(v(),le(z,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):oe("",!0)],32)])])])),t(Q,{header:"Confirmação",visible:w.value,"onUpdate:visible":e[5]||(e[5]=o=>w.value=o),style:{width:"350px"},modal:!0},{footer:P(()=>[t(u,{label:"Não",icon:"pi pi-times",onClick:T,class:"p-button-text"}),t(u,{label:"Sim",icon:"pi pi-check",onClick:R,class:"p-button-text",autofocus:""})]),default:P(()=>[e[14]||(e[14]=s("div",{class:"flex align-items-center justify-content-center"},[s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),s("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{We as default};
