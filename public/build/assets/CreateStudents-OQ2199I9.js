import{s as Z}from"./index-B1dBdUkT.js";import{s as ee}from"./index-CR9f2Ppr.js";import{s as le}from"./index-D8Vqk1eM.js";import{s as se}from"./index-CSh4kwL1.js";import{s as ae}from"./index-B4-Nx9Ph.js";import{s as oe}from"./index-DYnmT_uH.js";import{i as te,r,f as q,n as re,q as ie,o as ne,c as B,e as i,d as l,w as P,l as de,u as s,k as me,s as ue,v as d,A as m,t as u,F as pe,b as g}from"./app-BlaQt3nh.js";import{c as ce,a as p,u as fe}from"./index.esm-CaYsRfak.js";import"./moment-C5S46NFB.js";import{d as ve}from"./debounce-BMmXVQ06.js";import{p as be,f as ge,i as xe}from"./parseISO-B4U0aIQH.js";import"./index-Cdy3H-Na.js";import"./index-CmuUmXja.js";import"./index-BTQMIrIj.js";import"./index-BqcKIzOL.js";import"./index-BLvHuV3p.js";import"./index-Ghx-akHS.js";import"./index-BwL6jjMB.js";import"./index-DceSIrGu.js";import"./index-BKWIAAx0.js";import"./index-BuptCOd5.js";import"./index-DwNcPbH1.js";import"./index-Cs2pO2_a.js";import"./index-ozlawgMh.js";const ye={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},he={class:"w-full"},Ve={class:"flex flex-col gap-4 text-center"},we={key:1,class:"flex flex-col md:flex-row gap-12"},_e={class:"w-full"},ke={class:"card flex flex-col gap-4"},De={class:"w-full"},Se={class:"flex flex-col gap-2"},Ce={id:"name-help",class:"p-error"},Ee={class:"flex flex-col gap-2"},Ne={id:"email-help",class:"p-error"},$e={class:"flex flex-col gap-2"},qe={id:"password-help",class:"p-error"},Be={class:"flex flex-col gap-2"},Pe={id:"address-help",class:"p-error"},Te={class:"flex flex-col gap-2"},Ue={id:"phone-help",class:"p-error"},Fe={class:"flex flex-col gap-2"},Me={id:"birthdate-help",class:"p-error"},Oe={class:"flex flex-col gap-2"},Ye={id:"gender-help",class:"p-error"},pl={__name:"CreateStudents",setup(je){const x=re(),c=te();r(null);const y=r(!0),h=r(!1);let T=r(null);const U=r(""),V=r(null),z=r(1);r(15),r(0);const w=r(!1),G=r(null),f=r(!1),I=r([{label:"Masculino",value:"male"},{label:"Feminino",value:"female"},{label:"Outro",value:"other"}]);function L(t){const e=typeof t=="string"?be(t):t;return xe(e)?ge(e,"yyyy-MM-dd"):""}const A=ce({name:p().required().trim().label("Name"),email:p().required().trim().label("Email"),password:p().required().trim().label("Password"),birthdate:p().required().label("Data Nascimento"),phone:p().required().trim().label("Telefone"),address:p().required().trim().label("Endereço"),gender:p().required().trim().label("Gênero")}),{defineField:n,handleSubmit:R,resetForm:ze,errors:o,setErrors:W}=fe({validationSchema:A}),[_]=n("name"),[k]=n("email"),[D]=n("password"),[S]=n("birthdate"),[C]=n("phone"),[E]=n("address"),[N]=n("gender"),F=r();function M(){x&&x.back()}const O=()=>{w.value=!1},$=R(t=>{F.value!=null&&(t.image=F.value),t.birthdate=L(t.birthdate),f.value=!0,q.post("/api/students",t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{x.back(),c.add({severity:"success",summary:"Successo",detail:"Estudante criado com sucesso",life:3e3})}).catch(e=>{f.value=!1,c.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&W(e.response.data.errors)}).finally(()=>{f.value=!1})}),Y=async(t=1)=>{q.get("/api/students/create",{params:{query:U.value}}).then(e=>{V.value=e.data.roles,G.value=e.data.roles,y.value=!1}).catch(e=>{y.value=!1,c.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),M()})},Q=()=>{h.value=!0,q.delete(`/api/students/${T.value}`).then(()=>{V.value.data=V.value.data.filter(t=>t.id!==T.value),O(),c.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(t=>{c.add({severity:"error",summary:"Erro",detail:`${t}`,life:3e3}),h.value=!1}).finally(()=>{h.value=!1})},H=ve(()=>{Y(z.value)},300);return ie(U,H),ne(()=>{Y()}),(t,e)=>{const j=oe,b=ae,v=se,J=le,K=ee,X=Z;return g(),B(pe,null,[y.value?(g(),B("div",ye,[l("div",he,[l("div",Ve,[i(j,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[9]||(e[9]=l("p",null,"Por Favor Aguarde...",-1))])])])):(g(),B("div",we,[l("div",_e,[l("div",ke,[l("div",De,[i(b,{label:"Voltar",class:"mr-2 mb-2",onClick:M},{default:P(()=>e[10]||(e[10]=[l("i",{class:"pi pi-angle-left"},null,-1),de(" Voltar")])),_:1})]),e[18]||(e[18]=l("div",{class:"font-semibold text-xl"},"Estudante",-1)),e[19]||(e[19]=l("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),l("form",{onSubmit:e[7]||(e[7]=(...a)=>s($)&&s($)(...a))},[l("div",Se,[e[11]||(e[11]=l("label",{for:"name1"},"Nome",-1)),i(v,{modelValue:s(_),"onUpdate:modelValue":e[0]||(e[0]=a=>m(_)?_.value=a:null),id:"name",placeholder:"Nome",class:d({"p-invalid":s(o).name}),type:"text"},null,8,["modelValue","class"]),l("small",Ce,u(s(o).name),1)]),l("div",Ee,[e[12]||(e[12]=l("label",{for:"email"},"Email",-1)),i(v,{modelValue:s(k),"onUpdate:modelValue":e[1]||(e[1]=a=>m(k)?k.value=a:null),id:"email",placeholder:"Email",class:d({"p-invalid":s(o).email}),type:"email"},null,8,["modelValue","class"]),l("small",Ne,u(s(o).email),1)]),l("div",$e,[e[13]||(e[13]=l("label",{for:"password"},"Password",-1)),i(v,{modelValue:s(D),"onUpdate:modelValue":e[2]||(e[2]=a=>m(D)?D.value=a:null),id:"password",placeholder:"Password",class:d({"p-invalid":s(o).password}),type:"password"},null,8,["modelValue","class"]),l("small",qe,u(s(o).name),1)]),l("div",Be,[e[14]||(e[14]=l("label",{for:"name1"},"Endereço",-1)),i(v,{modelValue:s(E),"onUpdate:modelValue":e[3]||(e[3]=a=>m(E)?E.value=a:null),id:"address",placeholder:"Endereço",class:d({"p-invalid":s(o).address}),type:"text"},null,8,["modelValue","class"]),l("small",Pe,u(s(o).address),1)]),l("div",Te,[e[15]||(e[15]=l("label",{for:"name1"},"Telefone",-1)),i(v,{modelValue:s(C),"onUpdate:modelValue":e[4]||(e[4]=a=>m(C)?C.value=a:null),id:"phone",placeholder:"Telefone",class:d({"p-invalid":s(o).phone}),type:"text"},null,8,["modelValue","class"]),l("small",Ue,u(s(o).phone),1)]),l("div",Fe,[e[16]||(e[16]=l("label",{for:"name1"},"Data Nascimento",-1)),i(J,{modelValue:s(S),"onUpdate:modelValue":e[5]||(e[5]=a=>m(S)?S.value=a:null),id:"birthdate",placeholder:"Data Nascimento",class:d({"p-invalid":s(o).birthdate}),type:"text"},null,8,["modelValue","class"]),l("small",Me,u(s(o).birthdate),1)]),l("div",Oe,[e[17]||(e[17]=l("label",{for:"name1"},"Gênero",-1)),i(K,{modelValue:s(N),"onUpdate:modelValue":e[6]||(e[6]=a=>m(N)?N.value=a:null),id:"gender",options:I.value,optionLabel:"label",optionValue:"value",placeholder:"Selecione um Gênero",class:d({"p-invalid":s(o).gender})},null,8,["modelValue","options","class"]),l("small",Ye,u(s(o).gender),1)]),i(b,{label:"Submeter",class:"mr-2 mb-2",onClick:s($),disabled:f.value},null,8,["onClick","disabled"]),f.value?(g(),me(j,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):ue("",!0)],32)])])])),i(X,{header:"Confirmação",visible:w.value,"onUpdate:visible":e[8]||(e[8]=a=>w.value=a),style:{width:"350px"},modal:!0},{footer:P(()=>[i(b,{label:"Não",icon:"pi pi-times",onClick:O,class:"p-button-text"}),i(b,{label:"Sim",icon:"pi pi-check",onClick:Q,class:"p-button-text",autofocus:""})]),default:P(()=>[e[20]||(e[20]=l("div",{class:"flex align-items-center justify-content-center"},[l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),l("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{pl as default};
