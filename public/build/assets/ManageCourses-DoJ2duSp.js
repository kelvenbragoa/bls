import{s as le}from"./index-xVtuQsS3.js";import{s as ae}from"./index-DltW8KPs.js";import{s as ie}from"./index-BAXlNvHD.js";import{s as re}from"./index-BDV0PAbU.js";import{s as ne}from"./index-8GbJIJWL.js";import{s as de}from"./index-kJG44KYi.js";import{s as ue}from"./index-BUMsHM9b.js";import{i as ce,r as o,f as B,n as me,q as pe,o as fe,c as u,e as r,d as t,s as _,w as F,l as v,u as l,k as ve,v as P,A as T,t as a,F as R,m as ge,b as d}from"./app-Dg6_If3w.js";import{c as xe,a as A,u as _e}from"./index.esm-B3CXHi-X.js";import{h as z}from"./moment-C5S46NFB.js";import{d as ye}from"./debounce-BMmXVQ06.js";import"./index-An9NzH2t.js";import"./index-BDMYIOAl.js";import"./index-DTeROtJp.js";import"./index-Dsw_IUCw.js";import"./index-DTMIOtPg.js";import"./index-DyaxPoKb.js";import"./index-SVcKsKQj.js";import"./index-BuOmVI7m.js";import"./index-B5-4kyNr.js";import"./index-BQxnr25f.js";import"./index-DNq5N3QD.js";const be={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},he={class:"w-full"},ke={class:"flex flex-col gap-4 text-center"},we={key:1,class:"flex flex-col md:flex-row gap-12"},De={class:"w-full"},Ce={class:"card flex flex-col gap-4"},Se={class:"w-full"},Ve={class:"flex flex-col gap-2"},$e={id:"title-help",class:"p-error"},Ue={class:"flex flex-col gap-2"},Be={id:"content-help",class:"p-error"},Fe={class:"flex flex-col gap-2"},Te={id:"duration-help",class:"p-error"},Ae={class:"flex flex-col gap-2"},Me={key:0,class:"mt-2"},Ye={controls:"",class:"w-64 h-40 rounded border"},je=["src"],qe={class:"text-sm mt-1 text-gray-600"},Ee={class:"flex flex-col md:flex-row gap-6 bg-white dark:bg-gray-900 rounded-lg shadow p-6"},Le={class:"md:w-1/3 w-full rounded-lg overflow-hidden shadow"},Ne=["src"],Pe={class:"md:flex-1 flex flex-col justify-between"},Re={class:"text-3xl font-bold mb-3 text-gray-900 dark:text-gray-100"},ze={class:"text-gray-700 dark:text-gray-300 mb-4 whitespace-pre-line"},Ie={class:"text-gray-600 dark:text-gray-400 text-sm"},He={class:"mt-10"},We={class:"space-y-6"},Oe={class:"flex flex-col md:flex-row gap-4 items-start"},Qe={class:"flex-1"},Ge={class:"flex justify-between items-center mb-2"},Je={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},Ke={class:"text-sm text-gray-500 dark:text-gray-400"},Xe={class:"text-gray-700 dark:text-gray-300 whitespace-pre-line mb-2"},Ze={class:"w-full md:w-1/2"},et=["src"],Dt={__name:"ManageCourses",setup(tt){const g=me(),c=ce();o(null);const y=o(!0),b=o(!1);let M=o(null);const Y=o(""),n=o(null),I=o(1);o(15),o(0);const h=o(!1),k=o(!1),m=o(!1);o();const x=o();o(null);const w=o(null),H=xe({title:A().required().trim().label("Name"),content:A().required().trim().label("Content"),duration:A().required().trim().label("Duration")}),{defineField:D,handleSubmit:W,resetForm:O,errors:p,setErrors:Q}=_e({validationSchema:H}),[C]=D("title"),[S]=D("content"),[V]=D("duration");function j(){g&&g.back()}const G=o([{label:"Editar",icon:"pi pi-pencil"},{label:"Excluir",icon:"pi pi-trash"},{label:"Adicionar Teste",icon:"pi pi-plus"},{label:"Duvidas e Discussões",icon:"pi pi-comments"}]),q=()=>{h.value=!1},$=async(i=1)=>{B.get(`/api/courses/${g.currentRoute.value.params.id}`,{params:{query:Y.value}}).then(e=>{n.value=e.data,y.value=!1}).catch(e=>{y.value=!1,c.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),j()})},J=()=>{b.value=!0,B.delete(`/api/courses/${M.value}`).then(()=>{n.value.data=n.value.data.filter(i=>i.id!==M.value),q(),c.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(i=>{c.add({severity:"error",summary:"Erro",detail:`${i}`,life:3e3}),b.value=!1}).finally(()=>{b.value=!1})},K=i=>{const e=i.files[0];x.value=i.files[0],console.log(x.value),e&&e.type.startsWith("video/")&&(w.value=URL.createObjectURL(e))},U=W(i=>{x.value!=null&&(i.video=x.value),m.value=!0,B.post(`/api/courses/${g.currentRoute.value.params.id}/topics`,i,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{O(),$(),c.add({severity:"success",summary:"Successo",detail:"Curso criado com sucesso",life:3e3})}).catch(e=>{m.value=!1,c.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&Q(e.response.data.errors)}).finally(()=>{m.value=!1})}),X=ye(()=>{$(I.value)},300);return pe(Y,X),fe(()=>{$()}),(i,e)=>{var N;const E=ue,f=de,L=ne,Z=re,ee=ie,te=ae,se=le;return d(),u(R,null,[y.value?(d(),u("div",be,[t("div",he,[t("div",ke,[r(E,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[6]||(e[6]=t("p",null,"Por Favor Aguarde...",-1))])])])):(d(),u("div",we,[t("div",De,[t("div",Ce,[t("div",Se,[r(f,{label:"Voltar",class:"mr-2 mb-2",onClick:j},{default:F(()=>e[7]||(e[7]=[t("i",{class:"pi pi-angle-left"},null,-1),v(" Voltar")])),_:1}),r(f,{label:"Adicionar Aula",onClick:e[0]||(e[0]=s=>k.value=!k.value),icon:"pi pi-plus"})]),k.value?(d(),u("form",{key:0,onSubmit:e[4]||(e[4]=(...s)=>l(U)&&l(U)(...s))},[t("div",Ve,[e[8]||(e[8]=t("label",{for:"title"},"Titulo",-1)),r(L,{modelValue:l(C),"onUpdate:modelValue":e[1]||(e[1]=s=>T(C)?C.value=s:null),id:"title",placeholder:"Titulo",class:P({"p-invalid":l(p).title}),type:"text"},null,8,["modelValue","class"]),t("small",$e,a(l(p).title),1)]),t("div",Ue,[e[9]||(e[9]=t("label",{for:"content"},"Conteudo",-1)),r(Z,{modelValue:l(S),"onUpdate:modelValue":e[2]||(e[2]=s=>T(S)?S.value=s:null),rows:"5",cols:"30"},null,8,["modelValue"]),t("small",Be,a(l(p).content),1)]),t("div",Fe,[e[10]||(e[10]=t("label",{for:"duration"},"Duração",-1)),r(L,{modelValue:l(V),"onUpdate:modelValue":e[3]||(e[3]=s=>T(V)?V.value=s:null),id:"duration",placeholder:"Descrição",class:P({"p-invalid":l(p).duration}),type:"text"},null,8,["modelValue","class"]),t("small",Te,a(l(p).duration),1)]),t("div",Ae,[e[12]||(e[12]=t("label",{for:"video"},"Video",-1)),r(ee,{mode:"basic",name:"video[]",accept:"video/*",auto:"",maxFileSize:3e7,customUpload:"",onUploader:K}),w.value?(d(),u("div",Me,[t("video",Ye,[t("source",{src:w.value,type:"video/mp4"},null,8,je),e[11]||(e[11]=v(" Seu navegador não suporta vídeo. "))]),t("p",qe,a((N=i.videoFile)==null?void 0:N.name),1)])):_("",!0)]),r(f,{label:"Submeter",class:"mr-2 mb-2",onClick:l(U),disabled:m.value},null,8,["onClick","disabled"]),m.value?(d(),ve(E,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):_("",!0)],32)):_("",!0),t("div",Ee,[t("div",Le,[t("img",{src:"/storage/"+n.value.cover_image||"https://via.placeholder.com/400x250?text=Sem+Imagem",alt:"Imagem do curso",class:"object-cover w-full h-full"},null,8,Ne)]),t("div",Pe,[t("div",null,[t("h1",Re,a(n.value.title),1),t("p",ze,a(n.value.description),1)]),t("div",Ie,[t("p",null,[e[13]||(e[13]=t("strong",null,"Duração:",-1)),v(" "+a(n.value.duration||"Indefinida"),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"Criado em:",-1)),v(" "+a(l(z)(n.value.created_at).format("DD-MM-YYYY HH:mm")),1)]),t("p",null,[e[15]||(e[15]=t("strong",null,"Atualizado em:",-1)),v(" "+a(l(z)(n.value.updated_at).format("DD-MM-YYYY HH:mm")),1)])])])]),t("div",He,[e[16]||(e[16]=t("h2",{class:"text-2xl font-semibold mb-6 text-gray-900 dark:text-gray-100"}," Aulas ",-1)),t("ul",We,[(d(!0),u(R,null,ge(n.value.topics,(s,oe)=>(d(),u("li",{key:s.id,class:"p-4 border rounded-lg shadow-sm bg-gray-50 dark:bg-gray-800"},[r(te,{model:G.value},null,8,["model"]),t("div",Oe,[t("div",Qe,[t("div",Ge,[t("h3",Je,a(oe+1)+". "+a(s.title),1),t("span",Ke,a(s.duration||"Sem duração"),1)]),t("p",Xe,a(s.description||"Sem descrição"),1)]),t("div",Ze,[s.video_url?(d(),u("video",{key:0,controls:"",class:"w-full rounded shadow",src:"/storage/"+s.video_url,type:"video/mp4"}," Seu navegador não suporta vídeo. ",8,et)):_("",!0)])])]))),128))])])])])])),r(se,{header:"Confirmação",visible:h.value,"onUpdate:visible":e[5]||(e[5]=s=>h.value=s),style:{width:"350px"},modal:!0},{footer:F(()=>[r(f,{label:"Não",icon:"pi pi-times",onClick:q,class:"p-button-text"}),r(f,{label:"Sim",icon:"pi pi-check",onClick:J,class:"p-button-text",autofocus:""})]),default:F(()=>[e[17]||(e[17]=t("div",{class:"flex align-items-center justify-content-center"},[t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),t("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{Dt as default};
