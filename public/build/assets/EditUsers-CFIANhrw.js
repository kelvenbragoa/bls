import{s as H}from"./index-B1dBdUkT.js";import{s as J}from"./index-BTQMIrIj.js";import{s as K}from"./index-CSh4kwL1.js";import{s as X}from"./index-B4-Nx9Ph.js";import{s as Y}from"./index-DYnmT_uH.js";import{i as Z,r as s,f as $,n as ee,q as ae,o as le,c as D,e as t,d as a,w as B,l as se,u as l,k as oe,s as te,v as x,A as b,t as y,F as ie,b as _}from"./app-BlaQt3nh.js";import{c as re,a as E,u as ne}from"./index.esm-CaYsRfak.js";import"./moment-C5S46NFB.js";import{d as de}from"./debounce-BMmXVQ06.js";import"./index-Cdy3H-Na.js";import"./index-CmuUmXja.js";import"./index-BqcKIzOL.js";import"./index-BLvHuV3p.js";import"./index-Ghx-akHS.js";import"./index-BwL6jjMB.js";import"./index-DceSIrGu.js";import"./index-BKWIAAx0.js";import"./index-BuptCOd5.js";const ue={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},me={class:"w-full"},ce={class:"flex flex-col gap-4 text-center"},pe={key:1,class:"flex flex-col md:flex-row gap-12"},fe={class:"w-full"},ve={class:"card flex flex-col gap-4"},ge={class:"w-full"},xe={class:"flex flex-col gap-2"},be={id:"name-help",class:"p-error"},ye={class:"flex flex-col gap-2"},_e={id:"email-help",class:"p-error"},he={class:"flex flex-col gap-2"},we={id:"password-help",class:"p-error"},ke={class:"flex flex-col gap-2"},Ve={id:"role_id-help",class:"p-error"},Oe={__name:"EditUsers",setup(Ce){const d=ee(),u=Z();s(null);const h=s(!0),w=s(!1);let N=s(null);const P=s(""),n=s(null),z=s(1);s(15),s(0);const k=s(!1),U=s(null),m=s(!1),L=re({role_id:E().required().trim().label("Categoria"),name:E().required().trim().label("Name"),email:E().required().trim().label("Email")}),{defineField:c,handleSubmit:A,resetForm:Se,errors:i,setErrors:I}=ne({validationSchema:L}),[p]=c("role_id"),[f]=c("name"),[v]=c("email"),[V]=c("password"),[M]=c("_method"),q=s();function F(){d&&d.back()}const T=()=>{k.value=!1},C=A(r=>{q.value!=null&&(r.image=q.value),m.value=!0,$.post(`/api/users/${d.currentRoute.value.params.id}`,r,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{d.back(),u.add({severity:"success",summary:"Successo",detail:"Categoria criado com sucesso",life:3e3})}).catch(e=>{m.value=!1,u.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&I(e.response.data.errors)}).finally(()=>{m.value=!1})}),R=async(r=1)=>{$.get(`/api/users/${d.currentRoute.value.params.id}/edit`,{params:{query:P.value}}).then(e=>{n.value=e.data.user,f.value=n.value.name,v.value=n.value.email,p.value=n.value.role_id,U.value=e.data.roles,M.value="put",h.value=!1}).catch(e=>{h.value=!1,u.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),F()})},W=()=>{w.value=!0,$.delete(`/api/users/${N.value}`).then(()=>{n.value.data=n.value.data.filter(r=>r.id!==N.value),T(),u.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(r=>{u.add({severity:"error",summary:"Erro",detail:`${r}`,life:3e3}),w.value=!1}).finally(()=>{w.value=!1})},O=de(()=>{R(z.value)},300);return ae(P,O),le(()=>{R()}),(r,e)=>{const j=Y,g=X,S=K,Q=J,G=H;return _(),D(ie,null,[h.value?(_(),D("div",ue,[a("div",me,[a("div",ce,[t(j,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[6]||(e[6]=a("p",null,"Por Favor Aguarde...",-1))])])])):(_(),D("div",pe,[a("div",fe,[a("div",ve,[a("div",ge,[t(g,{label:"Voltar",class:"mr-2 mb-2",onClick:F},{default:B(()=>e[7]||(e[7]=[a("i",{class:"pi pi-angle-left"},null,-1),se(" Voltar")])),_:1})]),e[12]||(e[12]=a("div",{class:"font-semibold text-xl"},"Usuário",-1)),e[13]||(e[13]=a("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),a("form",{onSubmit:e[4]||(e[4]=(...o)=>l(C)&&l(C)(...o))},[a("div",xe,[e[8]||(e[8]=a("label",{for:"name1"},"Nome",-1)),t(S,{modelValue:l(f),"onUpdate:modelValue":e[0]||(e[0]=o=>b(f)?f.value=o:null),id:"name",placeholder:"Nome",class:x({"p-invalid":l(i).name}),type:"text"},null,8,["modelValue","class"]),a("small",be,y(l(i).name),1)]),a("div",ye,[e[9]||(e[9]=a("label",{for:"email"},"Email",-1)),t(S,{modelValue:l(v),"onUpdate:modelValue":e[1]||(e[1]=o=>b(v)?v.value=o:null),id:"email",placeholder:"Email",class:x({"p-invalid":l(i).email}),type:"email",readonly:""},null,8,["modelValue","class"]),a("small",_e,y(l(i).email),1)]),a("div",he,[e[10]||(e[10]=a("label",{for:"password"},"Password",-1)),t(S,{modelValue:l(V),"onUpdate:modelValue":e[2]||(e[2]=o=>b(V)?V.value=o:null),id:"password",placeholder:"Password",class:x({"p-invalid":l(i).password}),type:"password"},null,8,["modelValue","class"]),a("small",we,y(l(i).name),1)]),a("div",ke,[e[11]||(e[11]=a("label",{for:"name1"},"Previlégio",-1)),t(Q,{modelValue:l(p),"onUpdate:modelValue":e[3]||(e[3]=o=>b(p)?p.value=o:null),options:U.value,optionLabel:"name",optionValue:"id",placeholder:"Selecionar",class:x({"p-invalid":l(i).role_id})},null,8,["modelValue","options","class"]),a("small",Ve,y(l(i).role_id),1)]),t(g,{label:"Submeter",class:"mr-2 mb-2",onClick:l(C),disabled:m.value},null,8,["onClick","disabled"]),m.value?(_(),oe(j,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):te("",!0)],32)])])])),t(G,{header:"Confirmação",visible:k.value,"onUpdate:visible":e[5]||(e[5]=o=>k.value=o),style:{width:"350px"},modal:!0},{footer:B(()=>[t(g,{label:"Não",icon:"pi pi-times",onClick:T,class:"p-button-text"}),t(g,{label:"Sim",icon:"pi pi-check",onClick:W,class:"p-button-text",autofocus:""})]),default:B(()=>[e[14]||(e[14]=a("div",{class:"flex align-items-center justify-content-center"},[a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),a("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{Oe as default};
