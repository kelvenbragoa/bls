import{s as ee}from"./index-B1dBdUkT.js";import{s as le}from"./index-CR9f2Ppr.js";import{s as ae}from"./index-D8Vqk1eM.js";import{s as se}from"./index-CSh4kwL1.js";import{s as oe}from"./index-B4-Nx9Ph.js";import{s as te}from"./index-DYnmT_uH.js";import{i as re,r,f as B,n as ie,q as ne,o as de,c as q,e as i,d as l,w as T,l as ue,u as a,k as me,s as pe,v as u,A as m,t as p,F as ce,b as D}from"./app-BlaQt3nh.js";import{c as fe,a as c,u as ve}from"./index.esm-CaYsRfak.js";import"./moment-C5S46NFB.js";import{d as be}from"./debounce-BMmXVQ06.js";import{p as ge,f as xe,i as he}from"./parseISO-B4U0aIQH.js";import"./index-Cdy3H-Na.js";import"./index-CmuUmXja.js";import"./index-BTQMIrIj.js";import"./index-BqcKIzOL.js";import"./index-BLvHuV3p.js";import"./index-Ghx-akHS.js";import"./index-BwL6jjMB.js";import"./index-DceSIrGu.js";import"./index-BKWIAAx0.js";import"./index-BuptCOd5.js";import"./index-DwNcPbH1.js";import"./index-Cs2pO2_a.js";import"./index-ozlawgMh.js";const ye={key:0,class:"flex flex-col md:flex-row gap-12 min-h-screen items-center justify-center"},Ve={class:"w-full"},_e={class:"flex flex-col gap-4 text-center"},we={key:1,class:"flex flex-col md:flex-row gap-12"},ke={class:"w-full"},De={class:"card flex flex-col gap-4"},Se={class:"w-full"},Ce={class:"flex flex-col gap-2"},$e={id:"name-help",class:"p-error"},Ee={class:"flex flex-col gap-2"},Ne={id:"email-help",class:"p-error"},Be={class:"flex flex-col gap-2"},qe={id:"password-help",class:"p-error"},Te={class:"flex flex-col gap-2"},Ue={id:"address-help",class:"p-error"},Pe={class:"flex flex-col gap-2"},Fe={id:"phone-help",class:"p-error"},Me={class:"flex flex-col gap-2"},Oe={id:"birthdate-help",class:"p-error"},Re={class:"flex flex-col gap-2"},Ye={id:"gender-help",class:"p-error"},cl={__name:"EditStudents",setup(je){const f=ie(),v=re();r(null);const S=r(!0),C=r(!1);let U=r(null);const P=r(""),n=r(null),j=r(1);r(15),r(0);const $=r(!1),z=r(null),b=r(!1),G=r([{label:"Masculino",value:"male"},{label:"Feminino",value:"female"},{label:"Outro",value:"other"}]),I=fe({name:c().required().trim().label("Name"),email:c().required().trim().label("Email"),birthdate:c().required().label("Data Nascimento"),phone:c().required().trim().label("Telefone"),address:c().required().trim().label("Endereço"),gender:c().required().trim().label("Gênero")}),{defineField:d,handleSubmit:L,resetForm:ze,errors:o,setErrors:A}=ve({validationSchema:I}),[x]=d("name"),[h]=d("email"),[E]=d("password"),[y]=d("birthdate"),[V]=d("phone"),[_]=d("address"),[w]=d("gender"),[W]=d("_method"),F=r();function Q(t){const e=typeof t=="string"?ge(t):t;return he(e)?xe(e,"yyyy-MM-dd"):""}function M(){f&&f.back()}const O=()=>{$.value=!1},N=L(t=>{t.birthdate=Q(t.birthdate),F.value!=null&&(t.image=F.value),b.value=!0,B.post(`/api/students/${f.currentRoute.value.params.id}`,t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{f.back(),v.add({severity:"success",summary:"Successo",detail:"Categoria criado com sucesso",life:3e3})}).catch(e=>{b.value=!1,v.add({severity:"error",summary:"Erro}",detail:`${e.response.data.message}`,life:3e3}),e.response.data.errors&&A(e.response.data.errors)}).finally(()=>{b.value=!1})}),R=async(t=1)=>{B.get(`/api/students/${f.currentRoute.value.params.id}/edit`,{params:{query:P.value}}).then(e=>{n.value=e.data.user,x.value=n.value.name,h.value=n.value.email,y.value=n.value.birthdate,V.value=n.value.phone,_.value=n.value.address,w.value=n.value.gender,z.value=e.data.roles,W.value="put",S.value=!1}).catch(e=>{S.value=!1,v.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),M()})},H=()=>{C.value=!0,B.delete(`/api/students/${U.value}`).then(()=>{n.value.data=n.value.data.filter(t=>t.id!==U.value),O(),v.add({severity:"success",summary:"Sucesso",detail:"Sucesso ao apagar",life:3e3})}).catch(t=>{v.add({severity:"error",summary:"Erro",detail:`${t}`,life:3e3}),C.value=!1}).finally(()=>{C.value=!1})},J=be(()=>{R(j.value)},300);return ne(P,J),de(()=>{R()}),(t,e)=>{const Y=te,k=oe,g=se,K=ae,X=le,Z=ee;return D(),q(ce,null,[S.value?(D(),q("div",ye,[l("div",Ve,[l("div",_e,[i(Y,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),e[9]||(e[9]=l("p",null,"Por Favor Aguarde...",-1))])])])):(D(),q("div",we,[l("div",ke,[l("div",De,[l("div",Se,[i(k,{label:"Voltar",class:"mr-2 mb-2",onClick:M},{default:T(()=>e[10]||(e[10]=[l("i",{class:"pi pi-angle-left"},null,-1),ue(" Voltar")])),_:1})]),e[18]||(e[18]=l("div",{class:"font-semibold text-xl"},"Estudante",-1)),e[19]||(e[19]=l("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1)),l("form",{onSubmit:e[7]||(e[7]=(...s)=>a(N)&&a(N)(...s))},[l("div",Ce,[e[11]||(e[11]=l("label",{for:"name1"},"Nome",-1)),i(g,{modelValue:a(x),"onUpdate:modelValue":e[0]||(e[0]=s=>m(x)?x.value=s:null),id:"name",placeholder:"Nome",class:u({"p-invalid":a(o).name}),type:"text"},null,8,["modelValue","class"]),l("small",$e,p(a(o).name),1)]),l("div",Ee,[e[12]||(e[12]=l("label",{for:"email"},"Email",-1)),i(g,{modelValue:a(h),"onUpdate:modelValue":e[1]||(e[1]=s=>m(h)?h.value=s:null),id:"email",placeholder:"Email",class:u({"p-invalid":a(o).email}),type:"email",readonly:""},null,8,["modelValue","class"]),l("small",Ne,p(a(o).email),1)]),l("div",Be,[e[13]||(e[13]=l("label",{for:"password"},"Password",-1)),i(g,{modelValue:a(E),"onUpdate:modelValue":e[2]||(e[2]=s=>m(E)?E.value=s:null),id:"password",placeholder:"Password",class:u({"p-invalid":a(o).password}),type:"password"},null,8,["modelValue","class"]),l("small",qe,p(a(o).name),1)]),l("div",Te,[e[14]||(e[14]=l("label",{for:"name1"},"Endereço",-1)),i(g,{modelValue:a(_),"onUpdate:modelValue":e[3]||(e[3]=s=>m(_)?_.value=s:null),id:"address",placeholder:"Endereço",class:u({"p-invalid":a(o).address}),type:"text"},null,8,["modelValue","class"]),l("small",Ue,p(a(o).address),1)]),l("div",Pe,[e[15]||(e[15]=l("label",{for:"name1"},"Telefone",-1)),i(g,{modelValue:a(V),"onUpdate:modelValue":e[4]||(e[4]=s=>m(V)?V.value=s:null),id:"phone",placeholder:"Telefone",class:u({"p-invalid":a(o).phone}),type:"text"},null,8,["modelValue","class"]),l("small",Fe,p(a(o).phone),1)]),l("div",Me,[e[16]||(e[16]=l("label",{for:"name1"},"Data Nascimento",-1)),i(K,{modelValue:a(y),"onUpdate:modelValue":e[5]||(e[5]=s=>m(y)?y.value=s:null),id:"birthdate",placeholder:"Data Nascimento",class:u({"p-invalid":a(o).birthdate}),type:"text"},null,8,["modelValue","class"]),l("small",Oe,p(a(o).birthdate),1)]),l("div",Re,[e[17]||(e[17]=l("label",{for:"name1"},"Gênero",-1)),i(X,{modelValue:a(w),"onUpdate:modelValue":e[6]||(e[6]=s=>m(w)?w.value=s:null),id:"gender",options:G.value,optionLabel:"label",optionValue:"value",placeholder:"Selecione um Gênero",class:u({"p-invalid":a(o).gender})},null,8,["modelValue","options","class"]),l("small",Ye,p(a(o).gender),1)]),i(k,{label:"Submeter",class:"mr-2 mb-2",onClick:a(N),disabled:b.value},null,8,["onClick","disabled"]),b.value?(D(),me(Y,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):pe("",!0)],32)])])])),i(Z,{header:"Confirmação",visible:$.value,"onUpdate:visible":e[8]||(e[8]=s=>$.value=s),style:{width:"350px"},modal:!0},{footer:T(()=>[i(k,{label:"Não",icon:"pi pi-times",onClick:O,class:"p-button-text"}),i(k,{label:"Sim",icon:"pi pi-check",onClick:H,class:"p-button-text",autofocus:""})]),default:T(()=>[e[20]||(e[20]=l("div",{class:"flex align-items-center justify-content-center"},[l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),l("span",null,"Tem certeza que deseja proceder?")],-1))]),_:1},8,["visible"])],64)}}};export{cl as default};
